[gd_scene load_steps=17 format=4 uid="uid://cvhktbdwiarkb"]

[ext_resource type="PackedScene" uid="uid://q0aqgrff4q3w" path="res://Colleen.tscn" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://daacxe2xggbd2" path="res://main.gd" id="1_kek77"]
[ext_resource type="FontFile" uid="uid://bnjwlaww8s7di" path="res://assets/Early GameBoy.ttf" id="2_272bh"]
[ext_resource type="Texture2D" uid="uid://5ahywenlphm2" path="res://assets/tiles.png" id="3_h2yge"]
[ext_resource type="Script" uid="uid://dbwv4f0e8k8xq" path="res://tile_map_layer.gd" id="4_1bvp3"]
[ext_resource type="Script" uid="uid://04524wpsiema" path="res://wand.gd" id="4_kek77"]
[ext_resource type="Texture2D" uid="uid://dgjg501vvljh8" path="res://assets/wand.png" id="5_4c57u"]
[ext_resource type="PackedScene" uid="uid://webm7yrtf8fp" path="res://glasun.tscn" id="5_lquwl"]
[ext_resource type="PackedScene" uid="uid://bewqtxc35ijup" path="res://comet.tscn" id="6_7mycd"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_1bvp3"]
texture = ExtResource("3_h2yge")
0:5/0 = 0
0:1/0 = 0
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:2/0 = 0
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:4/0 = 0

[sub_resource type="TileSet" id="TileSet_lquwl"]
physics_layer_0/collision_layer = 3
sources/0 = SubResource("TileSetAtlasSource_1bvp3")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_272bh"]
size = Vector2(20, 22)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1bvp3"]
size = Vector2(2, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kek77"]
size = Vector2(5, 2)

[sub_resource type="CircleShape2D" id="CircleShape2D_kek77"]
radius = 26.9258

[sub_resource type="CircleShape2D" id="CircleShape2D_4c57u"]
radius = 86.0058

[node name="Main" type="Node2D"]
script = ExtResource("1_kek77")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAD//w4AAAAAAAAAAAD+/w4AAAAAAAAAAAD9/w4AAAAAAAAAAAD8/w4AAAAAAAAAAAD7/w4AAAAAAAAAAAD6/w4AAAAAAAAAAAD2/w4AAAAAAAAAAAD1/w4AAAAAAAAAAAD4/w4AAAAAAAAAAAD5/w4AAAAAAAAAAAD3/w4AAAAAAAAAAAD0/w4AAAAAAAAAAADz/w4AAAAAAAAAAADy/w4AAAAAAAAAAADx/w4AAAAAAAAAAADw/w4AAAAAAAAAAADv/w4AAAAAAAAAAADu/w4AAAAAAAAAAADt/w4AAAAAAAAAAADs/w4AAAAAAAAAAADr/w4AAAAAAAAAAADq/w4AAAAAAAAAAADy/w0AAAAAAAAAAADy/wwAAAAAAAAAAADz/w0AAAAAAAAAAAAAAA4AAAAAAAMAAAACAA4AAAAAAAMAAAABAA4AAAAAAAAAAAA=")
tile_set = SubResource("TileSet_lquwl")
script = ExtResource("4_1bvp3")

[node name="Wand" type="RigidBody2D" parent="."]
unique_name_in_owner = true
position = Vector2(-79, 206)
collision_layer = 0
collision_mask = 2
script = ExtResource("4_kek77")

[node name="Pulse" type="Polygon2D" parent="Wand"]
unique_name_in_owner = true
visible = false
color = Color(0.760099, 0.0855433, 0.375626, 1)
polygon = PackedVector2Array(-9, -25, -25, -9, -20, 17, -1, 27, 23, 13, 22, -16)

[node name="WandPickupZone" type="Area2D" parent="Wand"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wand/WandPickupZone"]
shape = SubResource("RectangleShape2D_272bh")

[node name="Sprite2D" type="Sprite2D" parent="Wand"]
rotation = 1.57079
texture = ExtResource("5_4c57u")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wand"]
rotation = 1.57079
shape = SubResource("RectangleShape2D_1bvp3")

[node name="StopWallPenetrationCollisionShape2D" type="CollisionShape2D" parent="Wand"]
position = Vector2(7.5, 0)
rotation = 3.14159
shape = SubResource("RectangleShape2D_kek77")
one_way_collision_margin = 10.0

[node name="PulseOnTimer" type="Timer" parent="Wand"]
unique_name_in_owner = true
wait_time = 2.0
one_shot = true

[node name="PulseOffTimer" type="Timer" parent="Wand"]
unique_name_in_owner = true
wait_time = 0.5
one_shot = true

[node name="PulseArea" type="Area2D" parent="Wand"]
unique_name_in_owner = true
scale = Vector2(0.972295, 0.92734)
collision_layer = 2
collision_mask = 5
monitoring = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wand/PulseArea"]
shape = SubResource("CircleShape2D_kek77")

[node name="SeekArea" type="Area2D" parent="Wand"]
unique_name_in_owner = true
collision_layer = 0
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wand/SeekArea"]
shape = SubResource("CircleShape2D_4c57u")

[node name="Glasun" parent="." instance=ExtResource("5_lquwl")]
position = Vector2(-46, 171)
collision_layer = 12

[node name="Comet" parent="." instance=ExtResource("6_7mycd")]
position = Vector2(-249, 215)
collision_layer = 12

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
offset_left = 4.0
offset_top = 3.0
offset_right = 64.0
offset_bottom = 26.0
theme_override_fonts/font = ExtResource("2_272bh")
theme_override_font_sizes/font_size = 8
text = "health: "

[node name="HealthValueLabel" type="Label" parent="CanvasLayer/Label"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 57.0
offset_right = 112.0
offset_bottom = 23.0
theme_override_fonts/font = ExtResource("2_272bh")
theme_override_font_sizes/font_size = 8
text = "3"

[node name="Label2" type="Label" parent="CanvasLayer"]
offset_left = 4.0
offset_top = 13.0
offset_right = 64.0
offset_bottom = 36.0
theme_override_fonts/font = ExtResource("2_272bh")
theme_override_font_sizes/font_size = 8
text = "Wand:"

[node name="WandSatietyLabel" type="Label" parent="CanvasLayer/Label2"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 40.0
offset_right = 95.0
offset_bottom = 23.0
theme_override_fonts/font = ExtResource("2_272bh")
theme_override_font_sizes/font_size = 8
text = "3"

[node name="Colleen" parent="." instance=ExtResource("1_ig7tw")]
unique_name_in_owner = true
position = Vector2(-200, 177)
collision_layer = 9
speed_base = 100
gravity = 200
jump_force_base = 112

[node name="Camera2D" type="Camera2D" parent="Colleen"]
scale = Vector2(0.125, 0.125)
limit_bottom = 240

[connection signal="body_entered" from="Wand/WandPickupZone" to="Colleen" method="_on_wand_pickup_zone_body_entered"]
[connection signal="body_exited" from="Wand/WandPickupZone" to="Colleen" method="_on_wand_pickup_zone_body_exited"]
[connection signal="timeout" from="Wand/PulseOnTimer" to="Wand" method="_on_pulse_on_timer_timeout"]
[connection signal="timeout" from="Wand/PulseOffTimer" to="Wand" method="_on_pulse_off_timer_timeout"]
[connection signal="body_entered" from="Wand/SeekArea" to="Wand" method="_on_seek_area_body_entered"]
[connection signal="player_has_wand_change" from="Colleen" to="Wand" method="_on_colleen_player_has_wand_change"]
